(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{103:function(e,t,i){"use strict";t.a={computed:{maxFolderNameLength:function(){return 128}},methods:{isValidFolderName:function(e){return e&&e.trim().length>0&&e.trim().length<=128},folderForSelector:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{id:e.id,name:e.name,disabled:t.disabled||!1,message:t.message||null}}}}},152:function(e,t,i){"use strict";var n=i(34),a=i(87),o=i(96),s=i(4),r={components:{RelativeTime:i(53).a,BridgedA:a.a,PadletCardActions:o.a},props:["wall","actions"],computed:{title:function(){return this.wall.title||Object(s.a)("Untitled padlet")},backgroundStyle:function(){var e=this.wall.background,t=e.dominant_color||[33,33,33],i="rgb(".concat(t.join(","),")"),a=Object(n.processedUrl)(e.url,{crop:"thumb",width:56,height:56});return['url("'.concat(a,'")'),i,"center/cover"].join(" ")}}},c=(i(215),i(1)),l=Object(c.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bridged-a",{staticClass:"tv-cell tv-cell-subtitle tv-cell-button",attrs:{role:"listitem",href:"/"+e.wall.address,target:"_blank","bridge-target":"padlet","data-app-target":"blank"}},[i("div",{staticClass:"tv-cell-thumb",style:{background:e.backgroundStyle}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("h3",[e._v(e._s(e.title))]),e._v(" "),i("div",{staticClass:"small-caption-type"},[i("span",[e._v(e._s(e.wall.builder.display_name))]),e._v(" \u2022\n      "),i("relative-time",{attrs:{datetime:e.wall.updated_at,dateformat:"short"}})],1)]),e._v(" "),e.actions?i("padlet-card-actions",{staticClass:"accessory",attrs:{type:"list",wall:e.wall}}):e._e()],1)}),[],!1,null,"5ffe5c74",null).exports,d=function(e,t){return e.updated_at>t.updated_at?-1:e.updated_at===t.updated_at?0:1},u=function(e,t){return e.title.localeCompare(t.title)},p={components:{PadletListitem:l},props:{walls:{type:Array,default:function(){return[]}},sortBy:{type:String,default:"date"},filter:{type:Function,default:null},navigate:{type:Boolean,default:!0},folder:{type:String,default:null},actions:{type:Boolean,default:!1}},computed:{sortedAndFilteredWalls:function(){var e=this.filter;return e||(e=function(e){return e}),"date"==this.sortBy?this.walls.slice().filter(e).sort(d):this.walls.slice().filter(e).sort(u)}},methods:{onClick:function(e,t){this.navigate||(e.preventDefault(),this.$emit("select",t))}}},h=(i(216),Object(c.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tv tv-list tv-list-ruled",attrs:{role:"list","data-turbolinks":"false"}},e._l(e.sortedAndFilteredWalls,(function(t){return i("padlet-listitem",{key:t.id,attrs:{wall:t,folder:e.folder,role:"listitem",actions:e.actions},nativeOn:{click:function(i){return e.onClick(i,t)}}})})),1)}),[],!1,null,"1b3bd049",null));t.a=h.exports},213:function(e,t,i){"use strict";var n=i(79);i.n(n).a},214:function(e,t,i){"use strict";var n=i(80);i.n(n).a},215:function(e,t,i){"use strict";var n=i(81);i.n(n).a},216:function(e,t,i){"use strict";var n=i(82);i.n(n).a},252:function(e,t){var i=9007199254740991,n="[object Arguments]",a="[object Function]",o="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/;function r(e,t){return function(e,t){for(var i=-1,n=e?e.length:0,a=Array(n);++i<n;)a[i]=t(e[i],i,e);return a}(t,(function(t){return e[t]}))}var c,l,d=Object.prototype,u=d.hasOwnProperty,p=d.toString,h=d.propertyIsEnumerable,v=Math.floor,m=(c=Object.keys,l=Object,function(e){return c(l(e))}),f=Math.random;function b(e,t){var i=_(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&y(e)}(e)&&u.call(e,"callee")&&(!h.call(e,"callee")||p.call(e)==n)}(e)?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],a=i.length,o=!!a;for(var s in e)!t&&!u.call(e,s)||o&&("length"==s||w(s,a))||i.push(s);return i}function g(e){if(i=(t=e)&&t.constructor,n="function"==typeof i&&i.prototype||d,t!==n)return m(e);var t,i,n,a=[];for(var o in Object(e))u.call(e,o)&&"constructor"!=o&&a.push(o);return a}function w(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||s.test(e))&&e>-1&&e%1==0&&e<t}var _=Array.isArray;function y(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?p.call(e):"";return t==a||t==o}(e)}e.exports=function(e){var t,i,n,a=y(e)?e:(t=e)?r(t,function(e){return y(e)?b(e):g(e)}(t)):[],o=a.length;return o>0?a[(i=0,n=o-1,i+v(f()*(n-i+1)))]:void 0}},319:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=function(e){return new Promise((function(t,i){var n=document.createElement("script");n.id="test-installed-chrome-extension-".concat(e);n.onload=function(){t(!0)},n.onerror=function(){t(!1)},n.src="chrome-extension://".concat(e,"/screenshare.js"),document.body.appendChild(n)}))},a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="kcljbbiddpoeaknnjaminoceoojdbikp";e&&(t="dkioigicbijecidbooccnhfafineggga");var i=document.getElementById("test-installed-chrome-extension-".concat(t));return i?(document.body.removeChild(i),n(t)):n(t)}},335:function(e,t,i){},341:function(e,t,i){},342:function(e,t,i){},346:function(e,t,i){},347:function(e,t,i){},348:function(e,t,i){},349:function(e,t,i){},350:function(e,t,i){},351:function(e,t,i){},352:function(e,t,i){},353:function(e,t,i){},354:function(e,t,i){},355:function(e,t,i){},358:function(e,t,i){},359:function(e,t,i){},360:function(e,t,i){},363:function(e,t,i){},364:function(e,t,i){},365:function(e,t,i){},366:function(e,t,i){},367:function(e,t,i){},368:function(e,t,i){},369:function(e,t,i){},370:function(e,t,i){},477:function(e,t){e.exports=function(e){for(var t=-1,i=e?e.length:0,n=0,a=[];++t<i;){var o=e[t];o&&(a[n++]=o)}return a}},481:function(e,t,i){"use strict";var n={},a=i(1),o=Object(a.a)(n,(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"progress"},[t("div",{staticClass:"progress-indeterminate"})])}],!1,null,null,null);t.a=o.exports},482:function(e,t,i){"use strict";i(32),i(250),i(4);var n=i(14),a=i(23),o={directives:{t:n.a},mixins:[a.a],props:["header","body","actionText","cancelText"],methods:{cancel:function(){this.$emit("cancel")},action:function(){this.$emit("action")}}},s=(i(506),i(1)),r=Object(s.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal is-wide",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[i("div",{staticClass:"modal-container is-animated scale-up"},[i("div",{staticClass:"modal-image"},[e._t("default")],2),e._v(" "),i("header",{staticClass:"modal-header"},[e._v(e._s(e.header))]),e._v(" "),i("div",{staticClass:"modal-body"},[i("div",[i("div",{staticClass:"regular-type"},[e._v(e._s(e.body))])])]),e._v(" "),i("footer",{staticClass:"modal-footer"},[e.cancelText?i("button",{staticClass:"text-button",on:{click:e.cancel}},[e._v(e._s(e.cancelText))]):i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button",on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),e.actionText?i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button",on:{click:e.action}},[e._v(e._s(e.actionText))]):e._e()])])])}),[],!1,null,"07ea6d42",null);t.a=r.exports},499:function(e,t,i){"use strict";i.r(t);var n,a=i(2),o=i(14),s=i(13),r=i(253),c=i(9),l={components:{SurfaceComposer:i(484).a}},d=(i(512),i(1)),u=Object(d.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"surface-add-post-chat-composer"},[t("surface-composer")],1)}),[],!1,null,"63558a6e",null).exports,p=i(8),h=i(10),v=i(11),m=i(29),f=i(67),b=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),g=function(e,t,i,n){var a,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,i,s):a(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},w=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},_=Object(m.d)("map"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.classes=[],t}return b(t,e),t.prototype.pick=function(e,t){this.pickLocation({latLng:e,name:t})},Object.defineProperty(t.prototype,"isAppOpeningNativeLocationPicker",{get:function(){return this.isApp&&Object(f.a)("useNativeMapLocationPicker")},enumerable:!0,configurable:!0}),t.prototype.respondToHeaderHeightUpdate=function(){var e=this;this.$nextTick((function(){e.animationStyle.innerHTML="\n      .map-input.fab-morphing-leave-to{\n        margin-top: "+(e.headerHeight-28)+"px !important;\n      }\n      "}))},t.prototype.respondToFabTransforming=function(e){e&&(this.classes=[])},t.prototype.respondToPinDragged=function(){this.classes=["panel-hidden"]},t.prototype.respondToPinDropped=function(e){this.classes=e?["panel-hidden","fab-appear"]:[]},t.prototype.mounted=function(){var e=this;this.$nextTick((function(){e.animationStyle=document.createElement("style"),e.animationStyle.innerHTML="\n      .map-input.fab-morphing-leave-to{\n        margin-top: "+(e.headerHeight-28)+"px !important;\n      }\n      ",document.head.appendChild(e.animationStyle)}))},g([m.c,w("design:type",Object)],t.prototype,"headerHeight",void 0),g([m.c,w("design:type",Object)],t.prototype,"isApp",void 0),g([_.Getter,w("design:type",Object)],t.prototype,"map",void 0),g([_.Getter,w("design:type",Object)],t.prototype,"isPickingLocation",void 0),g([_.Getter,w("design:type",Object)],t.prototype,"postWithLocationBeingEditedCid",void 0),g([_.Getter,w("design:type",Object)],t.prototype,"isPreviewPanelShown",void 0),g([_.Action,w("design:type",Object)],t.prototype,"startPickingLocation",void 0),g([_.Action,w("design:type",Object)],t.prototype,"stopPickingLocation",void 0),g([_.Action,w("design:type",Object)],t.prototype,"hidePickLocationPanel",void 0),g([_.Action,w("design:type",Object)],t.prototype,"pickLocation",void 0),g([_.Action,w("design:type",Object)],t.prototype,"enableMapFittingMarkersBounds",void 0),g([Object(v.e)("headerHeight"),w("design:type",Function),w("design:paramtypes",[]),w("design:returntype",void 0)],t.prototype,"respondToHeaderHeightUpdate",null),g([Object(v.e)("isPickingLocation"),w("design:type",Function),w("design:paramtypes",[Object]),w("design:returntype",void 0)],t.prototype,"respondToFabTransforming",null),t=g([Object(v.a)({components:{BaseIcon:c.a,SurfaceMapLocationPickerPanel:function(){return Promise.all([i.e(2),i.e(50)]).then(i.bind(null,749))}},mixins:[h.a]})],t)}(p.a),C=(i(513),Object(d.a)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:[].concat(["add-post-button"],e.classes,e.isPreviewPanelShown?["preview-shown"]:[])},[i("transition",{attrs:{name:"fab-morphing",mode:"out-in"}},[!e.isPickingLocation||e.isAppOpeningNativeLocationPicker?i("button",{directives:[{name:"t",rawName:"v-t:title",value:"Add post",expression:"'Add post'",arg:"title"}],staticClass:"floating-action-button",style:[{marginTop:e.headerHeight-28+"px"}],on:{click:e.startPickingLocation}},[i("base-icon",{staticClass:"add-icon",attrs:{name:"add"}}),e._v(" "),i("base-icon",{staticClass:"create-icon",attrs:{name:"create"}})],1):e._e(),e._v(" "),e.isPickingLocation&&!e.isAppOpeningNativeLocationPicker?i("div",{staticClass:"map-input"},[i("surface-map-location-picker-panel",{attrs:{map:e.map},on:{"pick-location":e.pick,hide:e.hidePickLocationPanel,close:e.stopPickingLocation,"pin-dragged":e.respondToPinDragged,"pin-dropped":e.respondToPinDropped}})],1):e._e()])],1)}),[],!1,null,"3f2d1a9d",null).exports),k=i(244),O=i(23);function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){j(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var x={mixins:[O.a,h.a],computed:P({},Object(a.c)("section",{wallSections:"sections"}),{sections:function(){return this.wallSections.filter((function(e){return e.id}))}}),methods:P({},Object(a.b)("post",["pickSection","cancelPickingSection"]),{pick:function(e){this.pickSection({sectionId:e})},cancel:function(){this.cancelPickingSection()}})},R=Object(d.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[e.sections.length>0?i("div",{staticClass:"modal-container"},[i("header",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Pick a column to post to")]),e._v(" "),i("div",{staticClass:"list modal-list"},e._l(e.sections,(function(t){return i("div",{key:t.id,staticClass:"list-item is-actionable big-body-type",on:{click:function(i){return e.pick(t.id)}}},[i("div",{staticClass:"list-item-primary"},[e._v("\n          "+e._s(t.title)+"\n        ")])])})),0)]):i("div",{staticClass:"modal-container"},[i("header",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You have not created any columns yet")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"modal-body"},[e._v("Create a column before posting.")]),e._v(" "),i("footer",{staticClass:"button-list"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button",on:{click:e.cancel}},[e._v("Ok")])])])])}),[],!1,null,null,null).exports,N=i(489),D=i(485),E=i(134),F=i(195),L=i(78),A={components:{BaseIcon:c.a},mixins:[h.a],computed:{timeLimitText:function(){var e=this.__("%{num} minutes",{num:"5"});return this.__("Your recordings can be up to %{timeLimit} long.",{timeLimit:e})}}},T=(i(517),Object(d.a)(A,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video-instructions inverse-scheme tv tv-list"},[i("div",{staticClass:"tv-cell tv-cell-default caption-type"},[i("base-icon",{attrs:{name:"pause_circled_ios"}}),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can pause and resume recording any number of times.")])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default caption-type"},[i("base-icon",{attrs:{name:"watch_ios"}}),e._v(" "),i("span",[e._v(e._s(e.timeLimitText))])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default caption-type"},[i("base-icon",{attrs:{name:"play_circled_ios"}}),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can replay the video before you save.")])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default caption-type"},[i("base-icon",{attrs:{name:"laughing_ios"}}),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You have a beautiful smile.")])],1)])}),[],!1,null,"1b063626",null).exports),I={components:{BaseIcon:c.a,LoadingSpinner:L.a,VideoInstructions:T},mixins:[h.a,F.a],props:{width:Number,height:Number},data:function(){return{maxDuration:300,bufferDuration:15,canvasWidth:640,canvasHeight:360}},computed:{constraints:function(){return{audio:{deviceId:this.activeAudioDeviceId?{exact:this.activeAudioDeviceId}:void 0},video:{deviceId:this.activeVideoDeviceId?{exact:this.activeVideoDeviceId}:void 0,width:3840,height:2160}}},isReachingRecordingLimit:function(){return this.secondsElapsed>=this.maxDuration-30}},mounted:function(){this.canvasWidth=this.width,this.canvasHeight=this.height,this.mountRecording("video"),this.mountStreaming()},beforeDestroy:function(){this.stopRecording(),this.stopStreaming()},methods:{close:function(){this.$emit("close")},done:function(){Object(s.a)("Video Booth","Recorded",null,this.secondsElapsed),"stopped"===this.recordingStatus?this.$emit("done",this.recordedBlob()):this.stopRecording()},gotRecordedData:function(){this.$emit("done",this.recordedBlob())},gotStream:function(e){var t=e.getVideoTracks()[0];if("function"===typeof t.getSettings){var i=t.getSettings();i.aspectRatio&&(this.canvasHeight=Math.floor(this.canvasWidth/i.aspectRatio))}this.$emit("stream",{canvasHeight:this.canvasHeight}),this.$refs.player.srcObject=e}}},B=(i(518),Object(d.a)(I,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video-booth"},[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Video booth")]),e._v(" "),i("div",{staticClass:"panel-right-item"},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.hasChunks&&!e.recording,expression:"hasChunks && !recording"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.done}},[e._v("\n        Playback and save\n      ")])])]),e._v(" "),i("div",{staticClass:"panel-body",style:{height:e.canvasHeight+"px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.streaming,expression:"!streaming"}],staticClass:"panel-interstitial tv"},[i("div",{staticClass:"tv-cell"},[i("loading-spinner")],1),e._v(" "),i("div",{staticClass:"tv-cell"},[i("p",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Starting camera and microphone ...")]),e._v(" "),i("p",{directives:[{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("Make sure you have given us permission to your camera and microphone.")])])]),e._v(" "),!e.streaming||e.recording||e.hasChunks?e._e():i("video-instructions"),e._v(" "),i("video",{directives:[{name:"show",rawName:"v-show",value:e.streaming,expression:"streaming"}],ref:"player",attrs:{width:e.canvasWidth,height:e.canvasHeight,autoplay:"",muted:""},domProps:{muted:!0}}),e._v(" "),i("div",{staticClass:"video-booth-meta inverse-scheme"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.recording||e.secondsElapsed>0,expression:"recording || secondsElapsed > 0"}],staticClass:"video-booth-duration"},[e._v(e._s(e.recordingDurationText))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"video-booth-beacon"},[i("span",{staticClass:"video-booth-beacon-text"},[e._v("Rec")]),i("base-icon",{attrs:{name:"record"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.recording&&e.hasChunks,expression:"!recording && hasChunks"}],staticClass:"video-booth-meta-overlay"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasReachedRecordingLimit&&e.hasChunks,expression:"!hasReachedRecordingLimit && hasChunks"},{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("Paused")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasReachedRecordingLimit,expression:"hasReachedRecordingLimit"},{name:"t",rawName:"v-t"}]},[e._v("Sorry, you've run out of time.")])])])],1),e._v(" "),i("footer",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"panel-footer"},[i("div",{staticClass:"video-booth-device-selector"},[e.audioDevices.length>1?i("div",{staticClass:"select-box video-booth-audio-select-box"},[i("base-icon",{attrs:{name:"mic"}}),e._v(" "),i("select",{on:{change:e.chooseAudioDevice}},e._l(e.audioDevices,(function(t){return i("option",{key:t.id,domProps:{selected:t.id==e.activeAudioDeviceId,value:t.id}},[e._v(e._s(t.label))])})),0)],1):e._e(),e._v(" "),e.videoDevices.length>1?i("div",{staticClass:"select-box video-booth-video-select-box"},[i("base-icon",{attrs:{name:"camera"}}),e._v(" "),i("select",{on:{change:e.chooseVideoDevice}},e._l(e.videoDevices,(function(t){return i("option",{key:t.id,staticClass:"ellipsified-type",domProps:{selected:t.id==e.activeVideoDeviceId,value:t.id}},[e._v(e._s(t.label))])})),0)],1):e._e()]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.streaming&&!e.hasReachedRecordingLimit,expression:"streaming && !hasReachedRecordingLimit"}],staticClass:"floating-action-button",attrs:{title:e.recordingButtonTitle},on:{click:e.startRecording}},[i("base-icon",{attrs:{name:"videocam"}})],1),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.hasChunks,expression:"hasChunks"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.restartRecording}},[e._v("\n      Discard and restart\n    ")])]),e._v(" "),i("footer",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"panel-footer"},[i("button",{directives:[{name:"t",rawName:"v-t:title",value:"Pause recording",expression:"'Pause recording'",arg:"title"}],staticClass:"floating-action-button video-booth-pause",on:{click:e.pauseRecording}},[i("base-icon",{attrs:{name:"pause"}})],1),e._v(" "),e.isReachingRecordingLimit&&!e.hasReachedRecordingLimit?i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"video-booth-runningout warning-type"},[e._v("\n      You're running out of time.\n    ")]):e._e()])])}),[],!1,null,"817585ce",null).exports);function U(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var M={directives:{t:o.a},props:{src:{required:!0,type:String},width:Number,height:Number,backAction:String},data:function(){return{title:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?U(Object(i),!0).forEach((function(t){$(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(a.e)(["isMobile"])),mounted:function(){this.isMobile||this.$refs.titleInput.focus()},methods:{close:function(){this.$emit("close")},done:function(){this.$emit("done",this.title)}}},W=(i(519),Object(d.a)(M,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video-replay"},[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},["cancel"==e.backAction?i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Cancel")]):i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Back")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Looks good?")]),e._v(" "),i("div",{staticClass:"panel-right-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"flat-button narrow-button",on:{click:e.done}},[e._v("Save")])])]),e._v(" "),i("div",{staticClass:"video-recorder-screen"},[i("video",{attrs:{src:e.src,width:e.width,height:e.height,controls:"true"}})]),e._v(" "),i("footer",{staticClass:"panel-footer"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Title")]),e._v(" "),i("div",{staticClass:"video-replay-title-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"},{name:"t",rawName:"v-t:placeholder",value:"Enter a title for your recording",expression:"'Enter a title for your recording'",arg:"placeholder"}],ref:"titleInput",attrs:{type:"text"},domProps:{value:e.title},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.done(t)},input:function(t){t.target.composing||(e.title=t.target.value)}}})])])])}),[],!1,null,"9a3c30d6",null).exports),H=i(482);function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var V={components:{RequireNotice:H.a},directives:{t:o.a},mixins:[h.a,O.a],props:["feature"],computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?q(Object(i),!0).forEach((function(t){z(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(a.e)(["isMac","isWindows","isMobile","isSafari","isIE","isEdge","isChrome"]),{browserName:function(){return this.isSafari?"Safari":this.isIE?"Internet Explorer":this.isEdge?"Edge":this.isChrome?"Chrome":"Your browser"}}),methods:{cancel:function(){this.$emit("close")},install:function(){this.isMac?window.open("http://sl.padlet.com/mac_app","_blank"):this.isWindows&&window.open("http://sl.padlet.com/windows_app","_blank"),this.$emit("close")}}},Y=Object(d.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isMac?n("require-notice",{attrs:{header:e.__("macOS app required"),body:e.__("%{name} does not support %{feature}. But our macOS App does. Install it to enjoy audio, video, and screen recording.",{name:e.browserName,feature:e.feature}),"action-text":e.__("Install"),"cancel-text":e.__("No thanks")},on:{action:e.install,cancel:e.cancel}},[n("img",{attrs:{src:i(520)}})]):e.isWindows?n("require-notice",{attrs:{header:e.__("Windows app required"),body:e.__("%{name} does not support %{feature}. But our Windows App does. Install it to enjoy audio, video, and screen recording.",{name:e.browserName,feature:e.feature}),"action-text":e.__("Install"),"cancel-text":e.__("No thanks")},on:{action:e.install,cancel:e.cancel}},[n("img",{attrs:{src:i(521)}})]):e.isMobile?n("require-notice",{attrs:{header:e.__("Not supported"),body:e.__("Sorry, this feature is only available on desktop devices."),"cancel-text":e.__("Close")},on:{cancel:e.cancel}}):e._e()}),[],!1,null,null,null).exports,G=i(98),Q={components:{VideoBooth:B,VideoReplay:W,SurfaceDialogDesktopAppRequired:Y},mixins:[E.a,O.a,h.a],data:function(){return{playback:!1,blob:null,canvasWidth:640,canvasHeight:360,supported:G.e,maxFileUploadSize:2147483648}},computed:{playbackURL:function(){return this.blob?URL.createObjectURL(this.blob):null}},watch:{playbackURL:function(e,t){t&&URL.revokeObjectURL(t)}},beforeDestroy:function(){this.playbackURL&&URL.revokeObjectURL(this.playbackURL)},methods:{cancel:function(){this.supported&&this.$refs.booth.hasChunks?window.confirm(this.__("You have not saved your video. Are you sure you want to close video booth?"))&&this.close():this.close()},close:function(){this.$emit("close")},done:function(e){var t=e||"video",i=new File([this.blob],"".concat(t,".").concat(G.d),{type:this.blob.type});this.handleCaption(e),this.handleFile(i)},saveStreamInfo:function(e){this.canvasHeight=e.canvasHeight},startPlayback:function(e){this.playback=!0,this.blob=e},stopPlayback:function(){this.playback=!1}}},J=(i(522),Object(d.a)(Q,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.supported?i("div",{staticClass:"video-recorder modal panel panel-top",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[i("div",{staticClass:"panel-container is-animated slide-from-top"},[[e.uploading?i("div",[i("header",{staticClass:"panel-header"}),e._v(" "),i("div",{staticClass:"panel-body",style:{height:this.canvasHeight+"px"}},[i("div",{staticClass:"panel-interstitial"},[i("interstitial-uploader",{attrs:{file:e.file,download:!0,"max-file-size":e.maxFileUploadSize,title:e.__("Saving video")},on:{done:e.onUploadDone,cancel:e.onUploadCancel}})],1)]),e._v(" "),i("footer",{staticClass:"panel-footer"})]):e.playback?i("video-replay",{attrs:{src:e.playbackURL,height:e.canvasHeight,width:e.canvasWidth},on:{close:e.stopPlayback,done:e.done}}):e._e(),e._v(" "),i("video-booth",{directives:[{name:"show",rawName:"v-show",value:!e.playback&&!e.uploading,expression:"!playback && !uploading"}],ref:"booth",attrs:{height:e.canvasHeight,width:e.canvasWidth},on:{done:e.startPlayback,close:e.cancel,stream:e.saveStreamInfo}})]],2)]):i("surface-dialog-desktop-app-required",{attrs:{feature:e.__("video recording")},on:{close:e.cancel}})}),[],!1,null,"e4fd83da",null).exports),K={props:{frequencies:{type:Array,default:function(){return[]}},backgroundColor:{type:String,default:"#F8F8F8"},barColor:{type:String,default:"#FEC006"},width:{type:Number,default:480},height:{type:Number,default:480}},data:function(){return{drawing:!1}},watch:{frequencies:function(){this.redrawOnNextFrame()},backgroundColor:function(){this.redrawOnNextFrame()},barColor:function(){this.redrawOnNextFrame()}},mounted:function(){this.redrawOnNextFrame()},methods:{redrawOnNextFrame:function(){this.drawing||(this.drawing=!0,window.requestAnimationFrame(this.redraw.bind(this)))},redraw:function(){var e=this.$el,t=e.getContext("2d"),i=e.height/255;t.fillStyle=this.backgroundColor,t.fillRect(0,0,e.width,e.height);var n=t.canvas.height;t.strokeStyle=this.barColor,t.lineWidth=3,t.lineJoin="round";var a=1,o=!0,s=!1,r=void 0;try{for(var c,l=this.frequencies[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var d=c.value*i,u=Math.floor(n-d);t.beginPath(),t.moveTo(a,u),t.lineTo(a,n),t.closePath(),t.stroke(),a+=4}}catch(p){s=!0,r=p}finally{try{o||null==l.return||l.return()}finally{if(s)throw r}}this.drawing=!1}}},X=(i(523),Object(d.a)(K,(function(){var e=this.$createElement;return(this._self._c||e)("canvas",{staticClass:"audio-visualizer",attrs:{width:this.width,height:this.height}})}),[],!1,null,"43642e0d",null).exports),Z={components:{BaseIcon:c.a},mixins:[h.a],computed:{timeLimitText:function(){var e=this.__("%{num} minutes",{num:"15"});return this.__("Your recordings can be up to %{timeLimit} long.",{timeLimit:e})}}},ee=(i(524),Object(d.a)(Z,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"audio-instructions tv tv-list caption-type"},[i("div",{staticClass:"tv-cell tv-cell-default"},[i("base-icon",{attrs:{name:"pause_circled_ios"}}),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can pause and resume recording any number of times.")])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default"},[i("base-icon",{attrs:{name:"watch_ios"}}),e._v(" "),i("span",[e._v(e._s(e.timeLimitText))])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default"},[i("base-icon",{attrs:{name:"play_circled_ios"}}),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can replay the audio before you save.")])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default"},[i("base-icon",{attrs:{name:"laughing_ios"}}),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You have a beautiful voice.")])],1)])}),[],!1,null,"557a7112",null).exports),te={components:{AudioVisualizer:X,BaseIcon:c.a,LoadingSpinner:L.a,AudioInstructions:ee},mixins:[F.a,h.a],props:["width","height"],data:function(){return{currentVolume:[],maxDuration:900,bufferDuration:15}},computed:{constraints:function(){return{audio:{deviceId:this.activeAudioDeviceId?{exact:this.activeAudioDeviceId}:void 0}}},isReachingRecordingLimit:function(){return this.secondsElapsed>=this.maxDuration-60},visualizationColor:function(){return this.recording?"#FEC006":"#E3E3E3"}},mounted:function(){this.mountStreaming(),this.mountRecording("audio")},beforeDestroy:function(){this.stopAudioProcessor(),this.stopRecording(),this.stopStreaming()},methods:{close:function(){this.$emit("close")},resetCanvas:function(){var e=this.$refs.canvas,t=e.getContext("2d");t.fillStyle="black",t.fillRect(0,0,e.width,e.height)},done:function(){Object(s.a)("Audio Booth","Recorded",null,this.secondsElapsed),"stopped"==this.recordingStatus?this.$emit("done",this.recordedBlob()):this.stopRecording()},gotRecordedData:function(){this.$emit("done",this.recordedBlob())},gotStream:function(e){var t=this;this.stopAudioProcessor();var i=window.AudioContext||window.webkitAudioContext;this._audioContext=new i,this._input=this._audioContext.createMediaStreamSource(e),this._analyser=this._audioContext.createAnalyser(),this._scriptProcessor=this._audioContext.createScriptProcessor(),this._analyser.smoothingTimeConstant=.3,this._analyser.fftSize=256,this._input.connect(this._analyser),this._analyser.connect(this._scriptProcessor),this._scriptProcessor.connect(this._audioContext.destination),this._scriptProcessor.onaudioprocess=function(){if(t._analyser){var e=new Uint8Array(128);t._analyser.getByteFrequencyData(e),t.currentVolume=Array.from(e)}}},stopAudioProcessor:function(){this._audioContext&&(this._scriptProcessor.disconnect(this._audioContext.destination),this._analyser.disconnect(this._scriptProcessor),this._input.disconnect(this._analyser),this._audioContext.close(),this._audioContext=null,this._scriptProcessor=null,this._analyser=null,this._input=null)}}},ie=(i(525),Object(d.a)(te,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"audio-booth"},[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Audio booth")]),e._v(" "),i("div",{staticClass:"panel-right-item"},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.hasChunks&&!e.recording,expression:"hasChunks && !recording"}],staticClass:"text-button narrow-button",on:{click:e.done}},[e._v("\n        Playback and save\n      ")])])]),e._v(" "),i("div",{staticClass:"panel-body",style:{height:e.height+"px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.streaming,expression:"!streaming"}],staticClass:"panel-interstitial tv"},[i("div",{staticClass:"tv-cell"},[i("loading-spinner")],1),e._v(" "),i("div",{staticClass:"tv-cell"},[i("p",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Starting microphone ...")]),e._v(" "),i("p",{directives:[{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("Make sure you have given us permission to use your microphone.")])])]),e._v(" "),e.streaming?i("audio-visualizer",{attrs:{width:e.width,height:e.height,frequencies:e.currentVolume,"bar-color":e.visualizationColor}}):e._e(),e._v(" "),!e.streaming||e.recording||e.hasChunks?e._e():i("audio-instructions"),e._v(" "),i("div",{staticClass:"audio-booth-meta"},[e.recording||e.secondsElapsed>0?i("div",{class:{"display3-type":!0,"caption-type":!e.recording,"error-type":e.recording&&e.isReachingRecordingLimit}},[e._v("\n        "+e._s(e.recordingDurationText)+"\n      ")]):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"audio-booth-beacon"},[i("span",{staticClass:"audio-booth-beacon-text"},[e._v("Rec")]),i("base-icon",{attrs:{name:"record"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.recording&&e.hasChunks&&!e.hasReachedRecordingLimit,expression:"!recording && hasChunks && !hasReachedRecordingLimit"},{name:"t",rawName:"v-t"}],staticClass:"audio-booth-beacon caption-type"},[e._v("\n        Paused\n      ")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasReachedRecordingLimit,expression:"hasReachedRecordingLimit"}],staticClass:"audio-booth-beacon caption-type"},[e._v("\n        Sorry, you've run out of time.\n      ")])])],1),e._v(" "),i("footer",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"panel-footer"},[i("div",[e.audioDevices.length>1?i("div",{staticClass:"select-box"},[i("select",{on:{change:e.chooseAudioDevice}},e._l(e.audioDevices,(function(t){return i("option",{key:t.id,domProps:{selected:t.id==e.activeAudioDeviceId,value:t.id}},[e._v(e._s(t.label))])})),0)]):e._e()]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.streaming&&!e.hasReachedRecordingLimit,expression:"streaming && !hasReachedRecordingLimit"}],staticClass:"floating-action-button",attrs:{title:e.recordingButtonTitle},on:{click:e.startRecording}},[i("base-icon",{attrs:{name:"mic"}})],1),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.hasChunks,expression:"hasChunks"},{name:"t",rawName:"v-t:title",value:"Start from scratch",expression:"'Start from scratch'",arg:"title"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.restartRecording}},[e._v("\n      Discard and restart\n    ")])]),e._v(" "),i("footer",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"panel-footer"},[i("button",{directives:[{name:"t",rawName:"v-t:title",value:"Pause recording",expression:"'Pause recording'",arg:"title"}],staticClass:"floating-action-button audio-booth-pause",on:{click:e.pauseRecording}},[i("base-icon",{attrs:{name:"pause"}})],1)])])}),[],!1,null,"7668dae8",null).exports),ne={components:{AudioVisualizer:X},props:{src:{type:String,required:!0}},data:function(){return{frequencies:[],playing:!1}},computed:{barColor:function(){return this.playing?"#7E57C2":"#E3E3E3"}},mounted:function(){var e=this.$refs.player,t=new(window.AudioContext||window.webkitAudioContext),i=t.createMediaElementSource(e),n=t.createAnalyser();n.fftSize=256,i.connect(n),n.connect(t.destination),this._analyser=n,this._audioContext=t},beforeDestroy:function(){this._audioContext&&this._audioContext.close()},methods:{stopViz:function(){this.playing=!1,clearInterval(this._interval)},startViz:function(){var e=this;this.playing=!0,this._interval=setInterval((function(){var t=new Uint8Array(128);e._analyser.getByteFrequencyData(t),e.frequencies=Array.from(t)}),32)}}};i(526);function ae(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function oe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var se={components:{AudioPlayer:Object(d.a)(ne,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"audio-player"},[t("audio-visualizer",{attrs:{frequencies:this.frequencies,"bar-color":this.barColor}}),this._v(" "),t("audio",{ref:"player",attrs:{src:this.src,controls:"true",controlslist:"nodownload"},on:{playing:this.startViz,pause:this.stopViz,ended:this.stopViz}})],1)}),[],!1,null,"17d57c59",null).exports},directives:{t:o.a},props:{src:{type:String,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(i),!0).forEach((function(t){oe(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ae(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(a.e)(["isMobile"])),data:function(){return{title:""}},mounted:function(){this.isMobile||this.$refs.titleInput.focus()},methods:{close:function(){this.$emit("close")},done:function(){this.$emit("done",this.title)}}},re=(i(527),{components:{AudioBooth:ie,AudioReplay:Object(d.a)(se,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"audio-replay"},[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Back")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Sounds good?")]),e._v(" "),i("div",{staticClass:"panel-right-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"flat-button narrow-button",on:{click:e.done}},[e._v("Save")])])]),e._v(" "),i("audio-player",{attrs:{src:e.src}}),e._v(" "),i("footer",{staticClass:"panel-footer"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Title")]),e._v(" "),i("div",{staticClass:"audio-replay-title-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"},{name:"t",rawName:"v-t:placeholder",value:"Enter a title for your recording",expression:"'Enter a title for your recording'",arg:"placeholder"}],ref:"titleInput",attrs:{type:"text"},domProps:{value:e.title},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.done(t)},input:function(t){t.target.composing||(e.title=t.target.value)}}})])])],1)}),[],!1,null,"bf36a612",null).exports,SurfaceDialogDesktopAppRequired:Y},mixins:[E.a,O.a,h.a],data:function(){return{playback:!1,blob:null,width:480,height:480,supported:G.e,maxFileUploadSize:104857600}},computed:{playbackURL:function(){return this.blob?URL.createObjectURL(this.blob):null}},watch:{playbackURL:function(e,t){t&&URL.revokeObjectURL(t)}},beforeDestroy:function(){this.playbackURL&&URL.revokeObjectURL(this.playbackURL)},methods:{cancel:function(){this.supported&&this.$refs.booth.hasChunks?confirm(this.__("You have not saved your recording. Are you sure you want to close audio booth?"))&&this.close():this.close()},close:function(){this.$emit("close")},done:function(e){var t=e||"audio";this.blob.name="".concat(t,".").concat(G.b),this.handleCaption(e),this.handleFile(this.blob)},startPlayback:function(e){this.playback=!0,this.blob=e},stopPlayback:function(){this.playback=!1}}}),ce=(i(528),Object(d.a)(re,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.supported?i("div",{staticClass:"audio-recorder modal panel",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[i("div",{staticClass:"panel-container is-animated scale-up"},[e.uploading?i("div",[i("header",{staticClass:"panel-header"}),e._v(" "),i("div",{staticClass:"panel-body"},[i("div",{staticClass:"panel-interstitial"},[i("interstitial-uploader",{attrs:{file:e.file,download:!0,"max-file-size":e.maxFileUploadSize,title:e.__("Saving audio")},on:{done:e.onUploadDone,cancel:e.onUploadCancel}})],1)]),e._v(" "),i("footer",{staticClass:"panel-footer"})]):e.playback?i("audio-replay",{attrs:{src:e.playbackURL},on:{close:e.stopPlayback,done:e.done}}):e._e(),e._v(" "),i("audio-booth",{directives:[{name:"show",rawName:"v-show",value:!e.playback&&!e.uploading,expression:"!playback && !uploading"}],ref:"booth",attrs:{width:e.width,height:e.height},on:{done:e.startPlayback,close:e.cancel}})],1)]):i("surface-dialog-desktop-app-required",{attrs:{feature:e.__("voice recording")},on:{close:e.cancel}})}),[],!1,null,"18173729",null).exports),le=i(483),de=i(152),ue=i(39),pe=i.n(ue),he=i(38);function ve(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n            query {\n              user(id: ",") {\n                walls: ","_walls {\n                  id\n                  title\n                  public_tag_list\n                  updated_at\n                  address\n                  background {\n                    fill\n                    url\n                    dominant_color\n                  }\n                  builder {\n                    avatar\n                    username\n                    display_name\n                  }\n                  links {\n                    permanent\n                  }\n                }\n              }\n            }\n          "]);return ve=function(){return e},e}var me={components:{PadletList:de.a,LoadingSpinner:L.a},directives:{t:o.a},mixins:[O.a],props:["user"],data:function(){var e=he.a.getItem("activePadletFilter")||"recents";return/^folder_/.test(e)&&(e="recents"),{walls:[],activeFilter:e,activeSort:he.a.getItem("activePadletSort")||"date",loading:0,errored:!1}},apollo:{walls:{query:function(){return pe()(ve(),this.user.id,this.activeFilter)},fetchPolicy:"cache-and-network",loadingKey:"loading",watchLoading:function(e){e&&(this.errored=!1)},error:function(){this.errored=!0},update:function(e){return e.user.walls||[]}}},methods:{cancel:function(){this.close()},close:function(){this.$emit("close")},select:function(e){this.$emit("select",e.links.permanent)},changeFilter:function(e){this.activeFilter=e}}},fe=(i(531),Object(d.a)(me,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"padlet-browser side-panel side-panel-with-curtain",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[i("div",{staticClass:"panel-container is-animated slide-from-right"},[i("header",{staticClass:"panel-header panel-header-with-content"},[i("div",{staticClass:"panel-left-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Padlets")]),e._v(" "),i("div",{staticClass:"panel-right-item"})]),e._v(" "),i("div",{staticClass:"tabs tabs-small panel-header-content-last"},[i("div",{directives:[{name:"t",rawName:"v-t"}],class:{"tab-item":!0,active:"recents"===e.activeFilter},on:{click:function(t){return e.changeFilter("recents")}}},[e._v("\n        Recents\n      ")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],class:{"tab-item":!0,active:"made"===e.activeFilter},on:{click:function(t){return e.changeFilter("made")}}},[e._v("Made")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],class:{"tab-item":!0,active:"shared"===e.activeFilter},on:{click:function(t){return e.changeFilter("shared")}}},[e._v("\n        Shared\n      ")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],class:{"tab-item":!0,active:"liked"===e.activeFilter},on:{click:function(t){return e.changeFilter("liked")}}},[e._v("\n        Liked\n      ")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],class:{"tab-item":!0,active:"network"===e.activeFilter},on:{click:function(t){return e.changeFilter("network")}}},[e._v("\n        Network\n      ")])]),e._v(" "),e.walls.length>0?i("div",{staticClass:"padlet-browser-results"},[i("padlet-list",{attrs:{walls:e.walls,"sort-by":e.activeSort,navigate:!1},on:{select:e.select}})],1):i("div",{class:{"padlet-browser-messages":!0,"padlet-browser-empty-message":0===e.loading}},[e.loading>0?i("loading-spinner"):e.errored?i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("Oops! Something went wrong. Please try again.")]):i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("No padlets in this folder.")])],1)])])}),[],!1,null,"62f3f1ed",null).exports),be=i(34),ge=i(252),we=i.n(ge),_e=i(481),ye={components:{BaseIcon:c.a},props:["value"],computed:{iconClass:function(){return{"caption-type":!this.value,"highlighted-type":this.value}},iconText:function(){return this.value?"check_box":"check_box_outline_blank"}},methods:{change:function(e){this.$emit("input",e.target.checked)}}},Ce=(i(532),Object(d.a)(ye,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"check-box"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:this.value},on:{change:this.change}}),this._v(" "),t("base-icon",{class:this.iconClass,attrs:{name:this.iconText}})],1)}),[],!1,null,"43ae7300",null).exports),ke=i(27),Oe=["leaning tower of pisa","eiffel tower","pyramids of giza","taj mahal","sydney opera house","mt fuji","mt everest","roman colosseum","word island dubai","yellowstone spring","victoria falls","caspian sea","pentagon","potash ponds utah","ayers rock","dead sea","capitol building","easter island","salar de uyuni","red sea","hoover dam","matterhorn","galesnjak island","bernabeu","london eye","palm jumeirah","statue of liberty","mt rushmore","pantheon","shwedagon pagoda","the kaaba","st peters basilica","51.848637, -0.55462","51.562629, -1.605534"],Se=function(e){var t=e.split(",");return 2==t.length&&(!isNaN(t[0])&&!isNaN(t[1]))},Pe={components:{BaseIcon:c.a,ProgressIndeterminate:_e.a,CheckBox:Ce},mixins:[h.a,O.a],data:function(){return{canGeolocate:!1,query:"",randomQuery:we()(Oe),loading:!0,mapType:he.a.getItem("mapBrowserMapType")||"satellite",mapWidth:640,mapHeight:480,imageWidth:640,imageHeight:480,showMarker:"yes"===he.a.getItem("mapBrowserMarker"),showFormInHeader:!0}},computed:{imageSrc:function(){return this.query?this.mapSrc:Object(be.processedUrl)(this.mapSrc,{width:this.imageWidth,height:this.imageHeight})},mapSrc:function(){var e=this.query?this.query:this.randomQuery;Se(e)&&(e='"'.concat(e,'"')),e=encodeURIComponent(e);var t="https://maps.googleapis.com/maps/api/staticmap?center=".concat(e,"&key=AIzaSyD3kjetwpeAYF-eXThlRhc1F1EYwsQvHcY&scale=2&size=").concat(this.mapWidth,"x").concat(this.mapHeight,"&maptype=").concat(this.mapType,"&language=").concat(ke.b);return this.showMarker&&(t="".concat(t,"&markers=").concat(e)),t}},watch:{mapType:function(){this.loading=!0},query:function(){this.loading=!0},showMarker:function(e){this.loading=!0,he.a.setItem("mapBrowserMarker",e?"yes":"no"),Object(s.a)("Maps Browser","Changed Marker",e)}},mounted:function(){Object(s.a)("Maps Browser","Mounted",this.mapType),this.canGeolocate="geolocation"in navigator,this.imageWidth=this.$refs.container.clientWidth,this.showFormInHeader=this.imageWidth>=640,this.imageHeight=Math.floor(.75*this.imageWidth),this.$refs.input.focus()},methods:{changeMapType:function(e){var t=e.target.value;Object(s.a)("Maps Browser","Changed Type",t),he.a.setItem("mapBrowserMapType",t),this.mapType=t},cancel:function(){this.close()},close:function(){this.$emit("close")},done:function(){this.$emit("select",this.mapSrc)},geolocate:function(){Object(s.a)("Maps Browser","Geolocation Started"),this.loading=!0,navigator.geolocation.getCurrentPosition(this.onLocationSuccess.bind(this),this.onLocationError.bind(this))},onImageLoad:function(){this.loading=!1},onImageError:function(){this.loading=!1},onLocationSuccess:function(e){Object(s.a)("Maps Browser","Geolocation Completed"),this.loading=!1,this.query=[e.coords.latitude,e.coords.longitude].join(",")},onLocationError:function(e){Object(s.a)("Maps Browser","Geolocation Failed"),this.loading=!1,e.code===e.PERMISSION_DENIED&&alert(this.__("Looks like we don't have permission to see your location. You may want to change that. (Don't worry, we do not store your location on our servers.)"))},search:function(){var e=this.$refs.input.value,t=function(e){var t=e.match(/\!2s(.+?)\!/);if(t)return t[1];return(t=e.match(/https?\:\/\/(.+?)\/place\/(.+?)\//))?t[2]:null}(e);this.query=t||e,Se(this.query)||Object(s.a)("Maps Browser","Searched",this.query)}}},je=(i(533),Object(d.a)(Pe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal panel",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[i("div",{ref:"container",staticClass:"panel-container is-animated scale-up"},[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),e.showFormInHeader?i("div",{staticClass:"panel-search"},[i("form",{on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[e.canGeolocate?i("button",{directives:[{name:"t",rawName:"v-t:title",value:"My location",expression:"'My location'",arg:"title"}],staticClass:"icon-button",attrs:{type:"button"},on:{click:e.geolocate}},[i("base-icon",{attrs:{name:"my_location"}})],1):e._e(),e._v(" "),i("input",{directives:[{name:"t",rawName:"v-t:placeholder",value:"Search for a place",expression:"'Search for a place'",arg:"placeholder"}],ref:"input",attrs:{type:"search"},domProps:{value:e.query}}),e._v(" "),i("button",{directives:[{name:"t",rawName:"v-t:title",value:"Search",expression:"'Search'",arg:"title"}],staticClass:"icon-button",attrs:{type:"submit"}},[i("base-icon",{attrs:{name:"arrow_forward"}})],1)])]):i("div",{staticClass:"panel-title"},[e._v(e._s(e.__("Place")))]),e._v(" "),i("div",{staticClass:"panel-right-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"flat-button narrow-button",on:{click:e.done}},[e._v("Save")])])]),e._v(" "),i("div",{staticClass:"panel-body"},[e.showFormInHeader?e._e():i("div",{staticClass:"panel-search"},[i("form",{on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[e.canGeolocate?i("button",{directives:[{name:"t",rawName:"v-t:title",value:"My location",expression:"'My location'",arg:"title"}],staticClass:"icon-button",attrs:{type:"button"},on:{click:e.geolocate}},[i("base-icon",{attrs:{name:"my_location"}})],1):e._e(),e._v(" "),i("input",{directives:[{name:"t",rawName:"v-t:placeholder",value:"Search for a place",expression:"'Search for a place'",arg:"placeholder"}],ref:"input",attrs:{type:"search",maxlength:"1024",autofocus:""},domProps:{value:e.query}}),e._v(" "),i("button",{directives:[{name:"t",rawName:"v-t:title",value:"Search",expression:"'Search'",arg:"title"}],staticClass:"icon-button",attrs:{type:"submit"}},[i("base-icon",{attrs:{name:"arrow_forward"}})],1)])]),e._v(" "),e.loading?i("progress-indeterminate",{staticClass:"map-browser-progress",style:{top:e.showFormInHeader?"0":"44px"}}):e._e(),e._v(" "),i("img",{attrs:{src:e.imageSrc,width:e.imageWidth,height:e.imageHeight},on:{load:e.onImageLoad,error:e.onImageError}})],1),e._v(" "),i("footer",{staticClass:"panel-footer"},[i("div",{staticClass:"radio-button"},[i("label",[i("input",{attrs:{type:"radio",value:"roadmap"},domProps:{checked:"roadmap"==e.mapType},on:{change:e.changeMapType}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Road")])]),e._v(" "),i("label",[i("input",{attrs:{type:"radio",value:"satellite"},domProps:{checked:"satellite"==e.mapType},on:{change:e.changeMapType}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Satellite")])]),e._v(" "),i("label",[i("input",{attrs:{type:"radio",value:"terrain"},domProps:{checked:"terrain"==e.mapType},on:{change:e.changeMapType}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Terrain")])]),e._v(" "),i("label",[i("input",{attrs:{type:"radio",value:"hybrid"},domProps:{checked:"hybrid"==e.mapType},on:{change:e.changeMapType}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Hybrid")])])]),e._v(" "),i("label",{staticClass:"map-browser-mark-check"},[i("check-box",{model:{value:e.showMarker,callback:function(t){e.showMarker=t},expression:"showMarker"}}),i("span",[e._v(e._s(e.__("Show pin")))])],1)])])])}),[],!1,null,"2ff20400",null).exports),xe=i(487),Re=i(488),Ne=i(251);i(15);function De(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Fe={components:{BaseIcon:c.a},mixins:[h.a],props:["audioDevices","activeAudioDeviceId"],methods:{chooseAudioDevice:function(e){this.$emit("choose-audio-device",e)}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?De(Object(i),!0).forEach((function(t){Ee(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):De(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(a.e)(["isChrome","isFirefox"]),{timeLimitText:function(){var e=this.__("%{num} minutes",{num:"5"});return this.__("You can record for up to %{timeLimit}. Recording will stop automatically at %{timeLimit}.",{timeLimit:e})}})},Le=(i(536),Object(d.a)(Fe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"screenshare-instructions tv tv-list"},[i("div",{staticClass:"tv-cell tv-cell-default caption-type"},[i("base-icon",{attrs:{name:"watch_ios"}}),e._v(" "),i("span",[e._v(e._s(e.timeLimitText))])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default caption-type"},[i("base-icon",{attrs:{name:"screen_ios"}}),e._v(" "),i("span",[e.isChrome?i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can record the whole screen, an application window, or another browser tab. You'll select what to record\n        in the next step.")]):e._e(),e._v(" "),e.isFirefox?i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can record a screen, or an application window. You\u2019ll select which screen or window to record in the next\n        step.")]):e._e()])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default caption-type"},[i("base-icon",{attrs:{name:"audio_ios"}}),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can record with or without audio.")])],1)])}),[],!1,null,"70e1a48c",null).exports);function Ae(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Ie={components:{BaseIcon:c.a,LoadingSpinner:L.a,CheckBox:Ce,InterstitialUploader:Ne.a,ScreenshareInstructions:Le},mixins:[h.a,F.a],props:{width:Number,height:Number},data:function(){return{maxDuration:300,bufferDuration:15,canvasWidth:640,canvasHeight:360,title:"",streamId:null,audioEnabled:!0,videoSource:"screen",isClosingDisabled:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(i),!0).forEach((function(t){Te(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ae(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(a.e)(["isChrome","isFirefox"]),{constraints:function(){return this.isChrome?{audio:!(!this.audioEnabled||0===this.audioDevices.length)&&"chrome",video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:this.streamId}}}:this.isFirefox?{audio:this.audioEnabled,video:{mediaSource:this.videoSource}}:void 0},isReachingRecordingLimit:function(){return this.secondsElapsed===this.maxDuration-30}}),watch:{recordingDurationText:function(e){this.$emit("recording-duration",e)},isReachingRecordingLimit:function(e){!0===e&&alert(this.__("You're running out of time."))},recording:function(e){e||(this.isFirefox&&(this.isClosingDisabled=!1),this.$emit("recording-interrupted"))}},mounted:function(){this.canvasWidth=this.width,this.canvasHeight=this.height,this.isChrome&&this.setupAudioStreaming()},beforeDestroy:function(){this.stopStreaming()},methods:{close:function(){this.isClosingDisabled||this.$emit("close")},done:function(){Object(s.a)("Screenshare booth","Recorded",null,this.secondsElapsed),"stopped"==this.recordingStatus?this.$emit("done",this.recordedBlob()):this.stopRecording()},gotRecordedData:function(){this.$emit("done",this.recordedBlob())},gotStream:function(e){var t=e.getVideoTracks()[0];if("function"===typeof t.getSettings){var i=t.getSettings();i.height&&(this.hiddenCanvasHeight=t.getSettings().height),i.width&&(this.hiddenCanvasWidth=t.getSettings().width),i.aspectRatio&&(this.canvasHeight=Math.floor(this.canvasWidth/i.aspectRatio))}this.streaming=!0,this.$refs.player.srcObject=e,this.startRecording(),this.$emit("record",this.audioEnabled)},errorGettingStream:function(e){this.isFirefox&&(this.isClosingDisabled=!1)},requestVideoStreamChrome:function(){var e=this;window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),window.addEventListener("message",(function(t){var i=t.data,n=i.type,a=i.streamId,o=t.origin;o!==window.location.origin&&console.warn("ScreenStream: you should discard foreign event from origin:",o),"SS_DIALOG_SUCCESS"===n&&(e.streaming||(e.streamId=a,e.streaming=!0,e.mountRecording("video"),e.mountScreenStreaming()))}))},requestVideoStreamDesktopApp:function(){var e=this;chrome&&chrome.tabs.query({currentWindow:!0,active:!0},(function(t){var i=t[0];chrome.desktopCapture.chooseDesktopMedia(["screen","window","audio"],i,(function(t){t?(e.streamId=t,e.mountRecording("video"),e.mountScreenStreaming()):e.close()}))}))},requestVideoStream:function(){this.isFirefox&&(this.isClosingDisabled=!0),this.stopStreaming(),this.isChrome&&!chrome.desktopCapture?this.requestVideoStreamChrome():this.isChrome&&chrome.desktopCapture?this.requestVideoStreamDesktopApp():(this.mountRecording("video"),this.mountScreenStreaming())},setupAudioStreaming:function(){this.mountToSetupAudioStreaming()},chooseScreenRecordingAudioDevice:function(e){"no_audio"===e.target.value?this.audioEnabled=!1:this.audioEnabled=!0,this.chooseAudioDevice(e)},chooseScreenRecordingVideoSource:function(e){this.videoSource=e.target.value},setAudioEnabled:function(e){this.audioEnabled="true"==e.target.value},restart:function(){this.discardRecording(),this.requestVideoStream()}}},Be=(i(537),Object(d.a)(Ie,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"screenshare-booth"},[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},[i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Screen recorder")]),e._v(" "),i("div",{staticClass:"panel-right-item"},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.hasRecordedChunks&&!e.recording,expression:"hasRecordedChunks && !recording"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.done}},[e._v("\n        Playback and save\n      ")])])]),e._v(" "),i("div",{staticClass:"panel-body",style:{height:this.canvasHeight+"px"}},[i("video",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"player",attrs:{width:e.canvasWidth,height:e.canvasHeight,autoplay:"",muted:""},domProps:{muted:!0}}),e._v(" "),i("div",[i("screenshare-instructions"),e._v(" "),e.isChrome?e._e():i("div",{staticClass:"screenshare-booth-radio-button"},[i("p",{staticClass:"small-caption-type form-label"},[e._v("Video")]),e._v(" "),i("div",{staticClass:"radio-button"},[i("label",[i("input",{attrs:{type:"radio",value:"screen"},domProps:{checked:"screen"==e.videoSource},on:{change:e.chooseScreenRecordingVideoSource}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Screen")])]),e._v(" "),i("label",[i("input",{attrs:{type:"radio",value:"window"},domProps:{checked:"window"==e.videoSource},on:{change:e.chooseScreenRecordingVideoSource}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Application window")])])])]),e._v(" "),e.isChrome?e._e():i("div",{staticClass:"screenshare-booth-radio-button"},[i("p",{staticClass:"small-caption-type form-label"},[e._v("Audio")]),e._v(" "),i("div",{staticClass:"radio-button"},[i("label",[i("input",{attrs:{type:"radio",value:"true"},domProps:{checked:1==e.audioEnabled},on:{change:e.setAudioEnabled}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("With audio")])]),e._v(" "),i("label",[i("input",{attrs:{type:"radio",value:"false"},domProps:{checked:0==e.audioEnabled},on:{change:e.setAudioEnabled}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Without audio")])])])]),e._v(" "),e.isChrome?i("div",{staticClass:"screenshare-booth-audio-select-box"},[e.audioDevices.length>0?i("div",{staticClass:"select-box"},[i("base-icon",{attrs:{size:"small",name:"mic"}}),e._v(" "),i("select",{on:{change:e.chooseScreenRecordingAudioDevice}},[e._l(e.audioDevices,(function(t){return i("option",{key:t.id,domProps:{selected:t.id==e.activeAudioDeviceId,value:t.id}},[e._v(e._s(t.label))])})),e._v(" "),i("option",{directives:[{name:"t",rawName:"v-t"}],attrs:{value:"no_audio"},domProps:{selected:"no_audio"==e.activeAudioDeviceId}},[e._v(e._s(e.__("No audio")))])],2)],1):e._e(),e._v(" "),0===e.audioDevices.length?i("div",{staticClass:"caption-type"},[i("base-icon",{attrs:{size:"small",name:"mic"}}),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Please allow microphone access to record audio")])],1):e._e()]):e._e()],1)]),e._v(" "),i("footer",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"panel-footer"},[i("button",{directives:[{name:"show",rawName:"v-show",value:!e.streaming&&!e.hasReachedRecordingLimit&&!e.hasRecordedChunks,expression:"!streaming && !hasReachedRecordingLimit && !hasRecordedChunks"}],staticClass:"floating-action-button",attrs:{title:e.recordingButtonTitle},on:{click:e.requestVideoStream}},[i("base-icon",{staticClass:"rotate-icon-270",attrs:{name:"arrow_forward"}})],1),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.hasRecordedChunks,expression:"hasRecordedChunks"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.restart}},[e._v("\n      Discard and restart\n    ")])])])}),[],!1,null,"2c8db6d6",null).exports),Ue={mixins:[h.a],props:["audioEnabled","recordingDurationText"],computed:{prompt:function(){return this.audioEnabled?this.__("Recording screen with audio..."):this.__("Recording screen without audio...")}},methods:{stop:function(){this.$emit("stop")}}};i(538);function $e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var We={components:{ScreenshareBooth:Be,ScreenshareStatusBar:Object(d.a)(Ue,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"snackbar"},[i("div",{staticClass:"snackbar-container is-animated slide-from-top inverse-scheme"},[e._m(0),e._v(" "),i("span",{staticClass:"prompt"},[e._v(e._s(e.prompt))]),e._v(" "),i("span",{staticClass:"counter caption-type"},[e._v(e._s(e.recordingDurationText)+"/05:00")]),e._v(" "),i("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"flat-button",on:{click:e.stop}},[e._v("Stop")])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"blinking-red-dot"},[t("div")])}],!1,null,"63a9fc70",null).exports,VideoReplay:W,SurfaceDialogDesktopAppRequired:Y},mixins:[E.a,O.a,h.a],data:function(){return{playback:!1,recording:!1,audioEnabled:null,recordingDurationText:"00:00",blob:null,canvasWidth:640,canvasHeight:360,maxFileUploadSize:2147483648}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(i),!0).forEach((function(t){Me(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$e(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(a.e)(["isMobile","isChrome","isFirefox"]),{playbackURL:function(){return this.blob?URL.createObjectURL(this.blob):null},supported:function(){return G.e&&!this.isMobile&&(this.isChrome||this.isFirefox)}}),watch:{playbackURL:function(e,t){t&&URL.revokeObjectURL(t)}},beforeDestroy:function(){this.playbackURL&&URL.revokeObjectURL(this.playbackURL)},methods:{cancelAndRestart:function(){this.supported&&this.$refs.booth.hasRecordedChunks?confirm(this.__("You have not saved your video. Are you sure you want to close the screen recorder?"))&&this.restart():this.restart()},cancel:function(){this.$refs.booth&&this.$refs.booth.isClosingDisabled||(this.supported&&this.$refs.booth.hasRecordedChunks?confirm(this.__("You have not saved your video. Are you sure you want to close the screen recorder?"))&&this.close():this.close())},restart:function(){this.$refs.booth.discardRecording(),this.playback=!1,this.blob=null},close:function(){this.$emit("close")},done:function(e){var t=e||"screenshare",i=new File([this.blob],"".concat(t,".").concat(G.d),{type:this.blob.type});this.handleCaption(e),this.handleFile(i)},saveStreamInfo:function(e){this.canvasHeight=e.canvasHeight},startPlayback:function(e){this.playback=!0,this.blob=e},startRecording:function(e){this.recording=!0,this.audioEnabled=e},stopRecording:function(){this.recording=!1,this.$refs.booth.stopRecording(),this.$refs.booth.stopStreaming()},updateRecordingDuration:function(e){this.recordingDurationText=e},onRecordingInterrupted:function(){this.recording=!1}}},He=(i(539),Object(d.a)(We,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.supported?i("div",{staticClass:"screenshare-recorder"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"modal panel",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[i("div",{staticClass:"panel-container is-animated scale-up"},[e.uploading?i("div",[i("header",{staticClass:"panel-header"}),e._v(" "),i("div",{staticClass:"panel-body",style:{height:this.canvasHeight+"px"}},[i("div",{staticClass:"panel-interstitial"},[i("interstitial-uploader",{attrs:{file:e.file,download:!0,"max-file-size":e.maxFileUploadSize,title:e.__("Saving video")},on:{done:e.onUploadDone,cancel:e.onUploadCancel}})],1)]),e._v(" "),i("footer",{staticClass:"panel-footer"})]):e.playback?i("video-replay",{attrs:{"back-action":"cancel",src:e.playbackURL,height:e.canvasHeight,width:e.canvasWidth},on:{close:e.cancelAndRestart,done:e.done}}):e._e(),e._v(" "),i("screenshare-booth",{directives:[{name:"show",rawName:"v-show",value:!e.playback&&!e.uploading,expression:"!playback && !uploading"}],ref:"booth",attrs:{height:e.canvasHeight,width:e.canvasWidth},on:{done:e.startPlayback,close:e.cancel,stream:e.saveStreamInfo,record:e.startRecording,"recording-duration":e.updateRecordingDuration,"recording-interrupted":e.onRecordingInterrupted}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.supported&&e.recording,expression:"supported && recording"}],on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[i("screenshare-status-bar",{attrs:{"audio-enabled":e.audioEnabled,"recording-duration-text":e.recordingDurationText},on:{stop:e.stopRecording}})],1)]):i("surface-dialog-desktop-app-required",{attrs:{feature:e.__("screen recording")},on:{close:e.cancel}})}),[],!1,null,"7e9026d1",null).exports),qe=i(104),ze={components:{BaseIcon:c.a},directives:{t:o.a},mixins:[O.a],props:["top","left","audioSupport","videoSupport","screenshareSupport","isPhone","windowWidth"],data:function(){return{topCorrection:0,leftCorrection:0,Source:qe.a}},computed:{correctedLeft:function(){return this.left+this.leftCorrection},correctedTop:function(){return this.top+this.topCorrection},style:function(){return this.isPhone||this.windowWidth<768?{}:{top:this.correctedTop+"px",left:this.correctedLeft+"px"}}},mounted:function(){if(!this.isPhone){this.left<0&&(this.leftCorrection=-this.left),this.left+336>window.innerWidth&&(this.leftCorrection=window.innerWidth-(this.left+336)),this.top<0&&(this.topCorrection=-this.top),this.top+568>window.innerHeight&&(this.topCorrection=window.innerHeight-(this.top+568))}},methods:{cancel:function(){this.$emit("close")},select:function(e){Object(s.a)("Content Menu","Selected Source",e),this.$emit("select",e)}}},Ve=(i(540),Object(d.a)(ze,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dropdown dropdown-with-curtain",style:e.style,on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[i("div",{staticClass:"dropdown-content tv tv-list"},[i("label",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{for:"content-hidden-file-input","data-source":"fileBrowser","data-pepin-id":"wish-more-upload","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.FileBrowser)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"upload"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Upload")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Pick file from your computer.")])])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"linkInput","data-pepin-id":"wish-more-link","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.LinkInput)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"link"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Link")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Enter any URL.")])])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"webBrowser","data-pepin-id":"wish-more-google","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.WebBrowser)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"search_web"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Google")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Search images, videos, audio, GIFs, web.")])])],1),e._v(" "),i("label",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{for:"content-hidden-image-input","data-source":"photoBooth","data-pepin-id":"wish-more-snap","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.PhotoBooth)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"camera"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Snap")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Take photo from your camera.")])])],1),e._v(" "),i("label",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{for:"content-hidden-video-input","data-unsupported":!e.videoSupport,"data-source":"videoRecorder","data-pepin-id":"wish-more-film","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.VideoRecorder)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"videocam"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",[i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Film")]),e.videoSupport?e._e():i("span",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-type error-type"},[e._v("Not supported")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Capture video from your camera.")])])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-unsupported":!e.audioSupport,"data-source":"audioRecorder","data-pepin-id":"wish-more-voice","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.AudioRecorder)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"mic"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",[i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Voice")]),e.audioSupport?e._e():i("span",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-type error-type"},[e._v("Not supported")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Record audio from your microphone.")])])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-unsupported":!e.screenshareSupport,"data-source":"screenshareRecorder","data-pepin-id":"wish-more-screen","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.ScreenshareRecorder)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"screen_share"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",[i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Screen")]),e.screenshareSupport?e._e():i("span",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-type error-type"},[e._v("Not supported")])]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Record your screen.")])])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"drawingCanvas","data-pepin-id":"wish-more-draw","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.DrawingCanvas)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"scribble"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Draw")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Doodle on an onscreen canvas.")])])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"mapBrowser","data-pepin-id":"wish-more-place","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.MapBrowser)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"place"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Place")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Add a location.")])])],1),e._v(" "),i("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"padletBrowser","data-pepin-id":"wish-more-padlet","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.PadletBrowser)}}},[i("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"crane"}}),e._v(" "),i("div",{staticClass:"tv-cell-text"},[i("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Padlet")]),e._v(" "),i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Link to one of your other padlets.")])])],1)])])}),[],!1,null,"995d68d8",null).exports),Ye=i(319);function Ge(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Qe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(i),!0).forEach((function(t){Je(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ge(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Je(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Ke={components:{LinkInput:Re.a,FileBrowser:N.a,PhotoBooth:D.a,VideoRecorder:J,AudioRecorder:ce,WebBrowser:le.a,PadletBrowser:fe,DrawingCanvas:xe.a,MapBrowser:je,ContentSourceMenu:Ve,InterstitialUploader:Ne.a,ScreenshareRecorder:He},mixins:[h.a],data:function(){return{audioSupport:G.e,chromeExtensionInstalled:null,uploading:!1,pendingFile:null,Source:qe.a}},computed:Qe({},Object(a.e)(["user","wall","isMobile","isChrome","isFirefox","isPhone","windowWidth"]),{},Object(a.c)("post",["postBeingEdited"]),{},Object(a.c)("contentPicker",["activeContentPickerPanel","contentSourceMenuPosition","xContentSourceMenu"]),{},Object(a.c)({maxFileUploadSize:"uploadLimit"}),{showHiddenInputs:function(){return this.isMobile},videoSupport:function(){return G.e||this.isMobile},activePanel:function(){return this.activeContentPickerPanel},menuTop:function(){return this.xContentSourceMenu?this.contentSourceMenuPosition.top:null},menuLeft:function(){return this.xContentSourceMenu?this.contentSourceMenuPosition.left:null},queryHint:function(){return this.postBeingEdited?this.postBeingEdited.subject:""},screenshareEnabledByDefault:function(){var e=this.isChrome&&window.chrome&&window.chrome.desktopCapture||this.isFirefox;return G.e&&!this.isMobile&&e},screenshareSupport:function(){return G.e&&!this.isMobile&&(this.isChrome||this.isFirefox)}}),mounted:function(){var e=this;Object(Ye.a)().then((function(t){t?e.chromeExtensionInstalled=!0:Object(Ye.a)(!0).then((function(t){e.chromeExtensionInstalled=!!t}))}))},methods:Qe({},Object(a.b)(["showExtensionRequired"]),{},Object(a.b)("contentPicker",["hideContentPickerPanel","hideContentSourceMenu","pickContentSource"]),{},Object(a.b)("post",["saveContent","saveCaptionAsTitle"]),{onUploadCancel:function(){this.pendingFile=null},onUploadDone:function(e,t){this.selectLink(t),this.pendingFile=null},onUploadReject:function(e){this.$emit("reject",e),this.pendingFile=null,this.closePanel()},selectFile:function(e){this.pendingFile=e.target.files[0],this.closeSourceMenu()},selectLink:function(e){this.saveContent({content:{link:e}})},setCaption:function(e){e&&this.saveCaptionAsTitle({caption:e})},closeSourceMenu:function(){this.hideContentSourceMenu()},closePanel:function(){this.hideContentPickerPanel()},activatePanel:function(e){var t=this;e===this.Source.ScreenshareRecorder&&this.screenshareSupport&&!this.screenshareEnabledByDefault?!0===this.chromeExtensionInstalled?this.pickContentSource({source:e}):Object(Ye.a)().then((function(e){e?t.showExtensionRequired():Object(Ye.a)(!0).then((function(e){t.showExtensionRequired()}))})):(e!==this.Source.FileBrowser&&e!==this.Source.PhotoBooth&&e!==this.Source.VideoRecorder||!this.isMobile)&&this.pickContentSource({source:e})}})},Xe=(i(541),Object(d.a)(Ke,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content-picker"},[e.xContentSourceMenu?i("content-source-menu",{attrs:{"window-width":e.windowWidth,"is-phone":e.isPhone,top:e.menuTop,left:e.menuLeft,"video-support":e.videoSupport,"audio-support":e.audioSupport,"screenshare-support":e.screenshareSupport},on:{select:e.activatePanel,close:e.closeSourceMenu}}):e._e(),e._v(" "),i("div",{staticClass:"content-panels"},[e.activePanel===e.Source.FileBrowser?i("file-browser",{attrs:{"max-file-size":e.maxFileUploadSize},on:{close:e.closePanel,reject:e.onUploadReject,select:e.selectLink}}):e.activePanel===e.Source.LinkInput?i("link-input",{on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.WebBrowser?i("web-browser",{attrs:{q:e.queryHint},on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.PhotoBooth?i("photo-booth",{on:{close:e.closePanel,select:e.selectLink,caption:e.setCaption}}):e.activePanel===e.Source.VideoRecorder?i("video-recorder",{on:{close:e.closePanel,select:e.selectLink,caption:e.setCaption}}):e.activePanel===e.Source.AudioRecorder?i("audio-recorder",{on:{close:e.closePanel,select:e.selectLink,caption:e.setCaption}}):e.activePanel===e.Source.DrawingCanvas?i("drawing-canvas",{on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.PadletBrowser?i("padlet-browser",{attrs:{user:e.user},on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.MapBrowser?i("map-browser",{on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.ScreenshareRecorder?i("screenshare-recorder",{on:{close:e.closePanel,select:e.selectLink,caption:e.setCaption}}):e._e()],1),e._v(" "),e.showHiddenInputs?i("div",{staticClass:"content-hidden-inputs"},[i("input",{attrs:{id:"content-hidden-file-input",type:"file",hidden:""},on:{change:e.selectFile}}),e._v(" "),i("input",{attrs:{id:"content-hidden-image-input",type:"file",accept:"image/*",capture:"environment",hidden:""},on:{change:e.selectFile}}),e._v(" "),i("input",{attrs:{id:"content-hidden-video-input",type:"file",accept:"video/*",capture:"environment",hidden:""},on:{change:e.selectFile}})]):e._e(),e._v(" "),e.pendingFile?i("div",{staticClass:"modal panel"},[i("div",{staticClass:"panel-container is-animated scale-up"},[i("div",{staticClass:"panel-body"},[i("interstitial-uploader",{staticClass:"panel-interstitial",attrs:{file:e.pendingFile,title:e.__("Uploading"),"max-file-size":e.maxFileUploadSize},on:{reject:e.onUploadReject,cancel:e.onUploadCancel,done:e.onUploadDone}})],1)])]):e._e()],1)}),[],!1,null,"3844243e",null).exports),Ze=i(90),et=i.n(Ze),tt=void 0;function it(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function nt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var at={components:{BaseIcon:c.a},directives:{t:o.a},data:function(){return{isAtBottom:!0,userScrolledUpAt:null,unreadPostCount:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?it(Object(i),!0).forEach((function(t){nt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(a.e)(["editorHeight","user","wishListMounted","posts","isReadOnly"]),{},Object(a.c)("post",["postsArray"]),{currentUser:function(){return this.user},shouldBePinnedToBottom:function(){return!this.userScrolledUpAt},postsCount:function(){return this.postsArray.length}}),methods:{scrollToBottom:function(){this._thresholdElement&&!this.isAtBottom&&(this._scrollContainerElem.scrollTop=this._thresholdElement.offsetTop,this.debouncedScrollToBottom())},debouncedScrollToBottom:et()((function(){tt&&tt.scrollToBottom()}),100),observeListScrolling:function(){var e=this,t=null,i=this._scrollContainerElem===document?document.documentElement.scrollTop:this._scrollContainerElem.scrollTop,n=0;this._scrollContainerElem.addEventListener("scroll",(function(a){var o=e._scrollContainerElem===document?document.documentElement.scrollTop:e._scrollContainerElem.scrollTop;t&&a.timeStamp-t<100&&i>o?n+=1:n=0,n>2&&(e.userScrolledUpAt=new Date,n=0),t=a.timeStamp,i=o}))},observeIntersectionOfThresholdElement:function(){var e=this;this._intersectionObserver=new IntersectionObserver((function(t){0===t[0].intersectionRatio?e.isAtBottom=!1:e.isAtBottom=!0})),this._intersectionObserver.observe(this._thresholdElement)}},watch:{isAtBottom:function(e){var t=this;e?(this.userScrolledUpAt=null,this.lastMessageReadAt=new Date,this.unreadPostCount=0):this.shouldBePinnedToBottom&&setTimeout((function(){t.shouldBePinnedToBottom&&t.scrollToBottom()}),100)},wishListMounted:function(){this.isReadOnly||("hidden"===getComputedStyle(document.body).overflow?(this._scrollContainerElem=document.getElementById("wish-list"),"visible"===getComputedStyle(this._scrollContainerElem)["overflow-y"]&&(this._scrollContainerElem=document.getElementById("wall-container"))):this._scrollContainerElem=document,this._thresholdElement=document.getElementById("wish-list-bottom"),this.observeListScrolling(),this.observeIntersectionOfThresholdElement(),this.debouncedScrollToBottom())},postsCount:function(){var e=this;if(this.userScrolledUpAt){var t=this.postsArray.filter((function(t){return void 0===t.id||new Date(t.created_at)>e.userScrolledUpAt}));t.some((function(t){return t.author_id===e.currentUser.id}))?this.debouncedScrollToBottom():this.unreadPostCount=t.length}else this.debouncedScrollToBottom()}},beforeDestroy:function(){this._intersectionObserver&&this._intersectionObserver.disconnect()}},ot=(i(542),Object(d.a)(at,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.userScrolledUpAt&&!e.isAtBottom?i("div",{staticClass:"scroll-to-bottom-button",style:{bottom:e.editorHeight+16+"px"}},[e.unreadPostCount>0?i("div",{staticClass:"badge-unread"},[i("div",{staticClass:"badge-unread-number"},[e._v(e._s(e.unreadPostCount))])]):e._e(),e._v(" "),i("button",{directives:[{name:"t",rawName:"v-t:title",value:"Scroll to bottom",expression:"'Scroll to bottom'",arg:"title"}],staticClass:"floating-action-button",on:{click:e.scrollToBottom}},[i("base-icon",{attrs:{name:"caret_arrow_down"}})],1)]):e._e()}),[],!1,null,"d0399296",null).exports),st=i(477),rt=i.n(st),ct=i(4),lt=[];function dt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ut(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(i),!0).forEach((function(t){pt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function pt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ht={components:{BaseIcon:c.a,SurfaceAddPostChatComposer:u,SurfaceMapLocationPicker:C,UploadFile:k.a,SurfaceSectionPicker:R,SurfaceContentPicker:Xe,SurfacePostsScroll:ot},directives:{t:o.a},computed:ut({},Object(a.e)(["user","wall","panel","nativePostEdit","isMobile","isReadOnly"]),{},Object(a.c)("post",["postBeingEditedCid","pendingPosts"]),{},Object(a.c)(["format","canIWrite","isSectioned","isAPanelVisible","isBackchannel","isMap","isTable"]),{},Object(a.c)("table",{tablePostsToUpload:"postsPendingUpload"}),{},Object(a.c)({maxFileUploadSize:"uploadLimit"}),{showMessage:function(){return!this.isMobile},canShowAddPost:function(){var e=this.isReadOnly,t=!!this.postBeingEditedCid,i=this.canIWrite;return!e&&!this.isSectioned&&!(this.isAPanelVisible||t)&&i},canShowMapLocationPicker:function(){return this.canShowAddPost&&this.isMap},canShowButton:function(){return this.canShowAddPost&&!this.isBackchannel&&!this.isMap&&!this.isTable},canPost:function(){return this.canIWrite&&!this.isReadOnly},uploads:function(){if(this.isSectioned){var e=this.pendingPosts.filter((function(e){return!!e.wall_section_id}));return rt()(e.map((function(e){return e.file})))}return this.isTable?this.tablePostsToUpload.map((function(e){return e.file})):rt()(this.pendingPosts.map((function(e){return e.file})))},showSectionPicker:function(){return!!this.isSectioned&&this.pendingPosts.filter((function(e){return!e.wall_section_id})).length>0},showPhotoBooth:function(){return!0}}),methods:ut({},Object(a.b)(["showFileSizeExceeded"]),{},Object(a.b)("post",["startNewPost","createPost","completePostUpload"]),{},Object(a.b)("snackbars",["setSnackbar"]),{addPost:function(){Object(s.a)("Posts","add","Plus Button"),this.startNewPost()},fileId:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uid",i=lt.indexOf(e);return-1===i?(lt.push(e),"".concat(t).concat(lt.length-1)):"".concat(t).concat(i)}(e,"file")},onUploadError:function(e,t){this.setSnackbar({message:t}),this.completePostUpload({file:e,status:"error"})},onUploadDone:function(e,t){this.completePostUpload({file:e,status:t})},onUploadCancel:function(e){this.setSnackbar({message:Object(ct.a)("Upload canceled")}),this.completePostUpload({file:e,status:"cancel"})},onUploadReject:function(e){this.showFileSizeExceeded({file:e})},onPhotoSelect:function(e){this.createPost({attributes:{file:e}})},onLinkSelect:function(e){this.createPost({attributes:{attachment:e}})},recordWhitelistedClick:r.c})},vt=(i(543),Object(d.a)(ht,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"surface-add-post normalize-typography",on:{click:function(t){return t.stopPropagation(),e.recordWhitelistedClick(t)}}},[e.canShowMapLocationPicker?i("surface-map-location-picker",{directives:[{name:"show",rawName:"v-show",value:e.canPost,expression:"canPost"}]}):e.canShowButton?i("div",{staticClass:"add-post-button"},[i("button",{directives:[{name:"t",rawName:"v-t:title",value:"Add post",expression:"'Add post'",arg:"title"}],staticClass:"floating-action-button",on:{click:e.addPost}},[i("base-icon",{staticClass:"add-icon",attrs:{name:"add"}}),e._v(" "),i("base-icon",{staticClass:"create-icon",attrs:{name:"create"}})],1),e._v(" "),e.showMessage?i("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"add-post-message"},[e._v("\n      Double click anywhere, drag files in, paste from clipboard, or click here to post.\n    ")]):e._e()]):e._e(),e._v(" "),e.uploads.length>0?i("div",{staticClass:"add-post-uploads"},e._l(e.uploads,(function(t){return i("upload-file",{key:e.fileId(t),attrs:{file:t,"max-file-size":e.maxFileUploadSize},on:{error:e.onUploadError,cancel:e.onUploadCancel,done:e.onUploadDone,reject:e.onUploadReject}})})),1):e._e(),e._v(" "),e.showSectionPicker?i("surface-section-picker"):e._e(),e._v(" "),e.isBackchannel&&!e.nativePostEdit&&e.canPost?i("surface-add-post-chat-composer"):e._e(),e._v(" "),e.isBackchannel?i("surface-posts-scroll"):e._e(),e._v(" "),i("surface-content-picker",{staticClass:"add-post-picker",on:{reject:e.onUploadReject}})],1)}),[],!1,null,null,null));t.default=vt.exports},506:function(e,t,i){"use strict";var n=i(335);i.n(n).a},512:function(e,t,i){"use strict";var n=i(341);i.n(n).a},513:function(e,t,i){"use strict";var n=i(342);i.n(n).a},517:function(e,t,i){"use strict";var n=i(346);i.n(n).a},518:function(e,t,i){"use strict";var n=i(347);i.n(n).a},519:function(e,t,i){"use strict";var n=i(348);i.n(n).a},520:function(e,t,i){e.exports=i.p+"media/images/mac_banner@3x-1aab6e699106e81ef1bd817bfe4343ac.png"},521:function(e,t,i){e.exports=i.p+"media/images/windows_banner@3x-a871edf2ef3b1e1ff134fc7e63b48c59.png"},522:function(e,t,i){"use strict";var n=i(349);i.n(n).a},523:function(e,t,i){"use strict";var n=i(350);i.n(n).a},524:function(e,t,i){"use strict";var n=i(351);i.n(n).a},525:function(e,t,i){"use strict";var n=i(352);i.n(n).a},526:function(e,t,i){"use strict";var n=i(353);i.n(n).a},527:function(e,t,i){"use strict";var n=i(354);i.n(n).a},528:function(e,t,i){"use strict";var n=i(355);i.n(n).a},531:function(e,t,i){"use strict";var n=i(358);i.n(n).a},532:function(e,t,i){"use strict";var n=i(359);i.n(n).a},533:function(e,t,i){"use strict";var n=i(360);i.n(n).a},536:function(e,t,i){"use strict";var n=i(363);i.n(n).a},537:function(e,t,i){"use strict";var n=i(364);i.n(n).a},538:function(e,t,i){"use strict";var n=i(365);i.n(n).a},539:function(e,t,i){"use strict";var n=i(366);i.n(n).a},540:function(e,t,i){"use strict";var n=i(367);i.n(n).a},541:function(e,t,i){"use strict";var n=i(368);i.n(n).a},542:function(e,t,i){"use strict";var n=i(369);i.n(n).a},543:function(e,t,i){"use strict";var n=i(370);i.n(n).a},79:function(e,t,i){},80:function(e,t,i){},81:function(e,t,i){},82:function(e,t,i){},87:function(e,t,i){"use strict";var n=i(67),a=i(41),o=i(59),s={props:{bridgeTarget:{type:String,default:"external"}},methods:{open:function(e){var t=this.$el.getAttribute("href");return!Object(n.a)("postMessage")||(e.preventDefault(),/^https?:\/\//.test(t)||/^\/\//.test(t)||(t="".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(t)),Object(a.a)(Object(o.e)(t,this.bridgeTarget)),!1)}}},r=i(1),c=Object(r.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("a",{on:{click:this.open}},[this._t("default")],2)}),[],!1,null,null,null);t.a=c.exports},96:function(e,t,i){"use strict";var n=i(2),a=i(9),o=i(10),s={components:{BaseIcon:a.a},mixins:[o.a],props:{folders:{default:function(){return[]}}},methods:{selectFolder:function(e){e.disabled||this.$emit("select",e)}}},r=(i(213),i(1)),c=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.folders,(function(t){return i("a",{key:t.id,staticClass:"list-item is-actionable",attrs:{href:"#","data-app-target":"none"},on:{click:function(i){return i.preventDefault(),e.selectFolder(t)}}},[i("base-icon",{attrs:{name:"folder"}}),e._v(" "),i("div",{staticClass:"list-item-text"},[i("div",{staticClass:"big-body-type"},[e._v(e._s(t.name))]),e._v(" "),t.message?i("div",{staticClass:"small-caption-type"},[e._v(e._s(t.message))]):e._e()])],1)})),0)}),[],!1,null,"03620b67",null).exports,l=i(23),d=i(103);function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h={components:{BaseIcon:a.a,FolderSelector:c},mixins:[l.a,o.a,d.a],props:{wall:{default:{}},type:{default:"card"}},data:function(){return{state:null,showDropdown:!1,showFolderSelector:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(n.e)(["activeFolder","user","folders","wallFolders"]),{},Object(n.c)(["allowFolders","isWallInFolder"]),{usableFolders:function(){var e=this,t=this.folders;return this.activeFolder&&(t=this.folders.filter((function(t){return t.id!==e.activeFolder.id}))),t.map((function(t){var i=e.isWallInFolder(e.wall.id,t.id),n=i?e.__("Already in folder"):null;return e.folderForSelector(t,{disabled:i,message:n})}))},canDelete:function(){return this.wall.builder.id===this.user.id},canArchive:function(){return this.wall.builder.id===this.user.id&&!this.wall.archived_at},canUnarchive:function(){return this.wall.builder.id===this.user.id&&this.wall.archived_at},canPerformAnAction:function(){return this.allowFolders||this.activeFolder||this.canDelete},showDivider:function(){return(this.activeFolder||this.allowFolders)&&this.canDelete}}),created:function(){this.$store.dispatch("fetchWallFolders",this.wall)},methods:{show:function(){this.showDropdown=!0},close:function(){this.state=null,this.showFolderSelector=!1,this.showDropdown=!1},cancel:function(){this.close()},moveToFolder:function(){this.state="moving",this.showFolderSelector=!0},addToFolder:function(){this.state="adding",this.showFolderSelector=!0},removeFromFolder:function(){var e=this;this.state="removing",this.$store.dispatch("removeFromFolder",{wallId:this.wall.id,folderId:this.activeFolder.id}).then((function(){e.state=null}))},folderSelected:function(e){var t=this;switch(this.state){case"moving":this.$store.dispatch("moveToFolder",{toFolderId:e.id,fromFolderId:this.activeFolder.id,wallId:this.wall.id}).then((function(){t.showFolderSelector=!1,t.showDropdown=!1}));break;case"adding":this.$store.dispatch("addToFolder",{wallId:this.wall.id,folderId:e.id}).then((function(){t.showFolderSelector=!1,t.showDropdown=!1}))}this.state=null},archiveWall:function(){this.showDropdown=!1,this.$store.dispatch("archiveWall",{wallId:this.wall.id})},unarchiveWall:function(){this.showDropdown=!1,this.$store.dispatch("unarchiveWall",{wallId:this.wall.id})},deleteWall:function(){var e=this,t=this.__("Are you sure you would like to delete the following padlet?");confirm("".concat(t,"\n\n\t").concat(this.wall.title||this.__("Untitled padlet")))&&this.$store.dispatch("deleteWall",{wallId:this.wall.id}).then((function(){e.showDropdown=!1}))}}},v=(i(214),Object(r.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.canPerformAnAction?i("div",{staticClass:"dropdown-button",attrs:{"data-type":e.type}},[i("button",{directives:[{name:"t",rawName:"v-t:title",value:"Padlet actions",expression:"'Padlet actions'",arg:"title"}],staticClass:"icon-button expand-button",attrs:{role:"menuitem","aria-haspopup":"true"},on:{click:function(t){return t.preventDefault(),e.show(t)}}},[i("base-icon",{attrs:{name:"more_vert"}})],1),e._v(" "),e.showDropdown?i("div",{staticClass:"dropdown-menu"},[i("div",{staticClass:"dropdown dropdown-with-curtain",on:{click:function(t){return t.target!==t.currentTarget?null:(t.preventDefault(),t.stopPropagation(),e.cancel(t))}}},[i("menu",{staticClass:"dropdown-content"},[i("div",{staticClass:"tv tv-list"},[e.activeFolder?i("a",{staticClass:"tv-cell tv-cell-default is-actionable",attrs:{"data-app-target":"none"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.moveToFolder(t)}}},[i("base-icon",{attrs:{name:"send"}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Move to folder")])],1):e._e(),e._v(" "),e.allowFolders?i("a",{staticClass:"tv-cell tv-cell-default is-actionable",attrs:{"data-app-target":"none"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.addToFolder(t)}}},[i("base-icon",{attrs:{name:"copy"}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Add to folder")])],1):e._e(),e._v(" "),e.activeFolder?i("a",{staticClass:"tv-cell tv-cell-default is-actionable",attrs:{"data-app-target":"none"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.removeFromFolder(t)}}},[i("base-icon",{attrs:{name:"close"}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Remove from folder")])],1):e._e(),e._v(" "),e.canArchive?i("a",{staticClass:"tv-cell tv-cell-default is-actionable",on:{click:function(t){return t.preventDefault(),e.archiveWall(t)}}},[i("base-icon",{attrs:{name:"archive"}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Archive")])],1):e._e(),e._v(" "),e.canUnarchive?i("a",{staticClass:"tv-cell tv-cell-default is-actionable",on:{click:function(t){return t.preventDefault(),e.unarchiveWall(t)}}},[i("base-icon",{attrs:{name:"archive"}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Unarchive")])],1):e._e(),e._v(" "),e.showDivider?i("div",{staticClass:"tv-divider"}):e._e(),e._v(" "),e.canDelete?i("a",{staticClass:"tv-cell tv-cell-default is-actionable",attrs:{"data-app-target":"none"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.deleteWall(t)}}},[i("base-icon",{attrs:{name:"delete"}}),i("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Delete padlet")])],1):e._e()])])])]):e._e(),e._v(" "),e.showFolderSelector?i("div",{staticClass:"modal standard-scheme",on:{click:function(t){return t.target!==t.currentTarget?null:(t.preventDefault(),t.stopPropagation(),e.close(t))}}},[i("div",{staticClass:"modal-container"},[i("header",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Choose a folder")]),e._v(" "),i("folder-selector",{staticClass:"list modal-list",attrs:{folders:e.usableFolders},on:{select:e.folderSelected,cancel:function(t){return t.stopPropagation(),e.cancel(t)}}})],1)]):e._e()]):e._e()}),[],!1,null,"2d104f81",null));t.a=v.exports}}]);
//# sourceMappingURL=34-760d5ff3222a05222eea.chunk.js.map